(this.webpackJsonpillancer=this.webpackJsonpillancer||[]).push([[0],{192:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(10),i=a.n(o),c=a(51),r=a(52),s=a(55),l=a(54),b=a(19),d=a(56),j=a(34),u=a(13),p=a(254),h=a(236),g=a(2),m=Object(h.a)((function(e){return{root:{content:"",backgroundPosition:"center center",backgroundSize:"cover",top:0,left:0,bottom:0,right:0,position:"absolute",zIndex:0}}}));var O=function(e){var t=m(),a=e.image,n=e.opacity,o=Object(d.a)(e,["image","opacity"]);return Object(g.jsx)("div",Object(u.a)({className:t.root,style:{backgroundImage:"url(".concat(a,")"),opacity:n}},o))},x=a(96),f=a(97),v=a.n(f),y=Object(h.a)((function(e){return Object(u.a)(Object(u.a)({root:{position:"relative","& > .MuiContainer-root":{position:"relative"}}},[["default",e.palette.background.default],["light",Object(x.emphasize)(e.palette.background.default,.03)],["primary",e.palette.primary.main],["secondary",e.palette.secondary.main]].reduce((function(t,a){var n=Object(b.a)(a,2),o=n[0],i=n[1];return t["color".concat(v()(o))]=Object(j.a)({backgroundColor:i,color:e.palette.getContrastText(i)},"& + &",{borderTop:"1px solid ".concat(Object(x.emphasize)(i,.09))}),t}),{})),{},{colorInherit:{color:"inherit"},colorTransparent:{backgroundColor:"transparent",color:"inherit"}})}));var k=function(e){var t=y(),a=e.bgColor,n=void 0===a?"default":a,o=e.bgImage,i=e.bgImageOpacity,c=e.size,r=void 0===c?"normal":c,s=e.className,l=(e.children,Object(d.a)(e,["bgColor","bgImage","bgImageOpacity","size","className","children"])),b={normal:{xs:6},medium:{xs:6,sm:10},large:{xs:6,sm:20},auto:0}[r];return Object(g.jsxs)(p.a,Object(u.a)(Object(u.a)({component:"section",py:b,className:t.root+" ".concat(t["color".concat(v()(n))])+(s?" ".concat(s):"")},l),{},{children:[o&&Object(g.jsx)(O,{image:o,opacity:i}),e.children]}))},I=a(241),C=a(242),w=a(243),S=a(12),z=(a(122),a(21)),W=a(68),N=Object(z.a)();function F(e){var t=e.children;return Object(g.jsxs)(S.b,{history:N,children:[Object(g.jsx)(L,{}),t]})}function L(){var e=Object(S.g)();return Object(n.useEffect)((function(){window.scrollTo(0,0)}),[e.pathname]),null}var P=a(257),T=a(194),A=a(123),B=a.n(A),E=a(244),q=a(100),D=a.n(q),M=a(101),R=a.n(M),H=a(258),G=a(245),J=a(246),U=a(247),$=a(129),K=a(239),V=a(14),Q=a(85),X=a(86),Y=a(84),Z=a(240),_=a(238),ee=a(256),te={light:{palette:{type:"light",primary:{main:Q.a[500]},secondary:{main:X.a[500]},background:{default:"#fff",paper:"#fff"}}},dark:{palette:{type:"dark",primary:{main:Q.a[500]},secondary:{main:X.a[500]},background:{default:Y.a[900],paper:Y.a[800]}}},common:{typography:{fontSize:14,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif'},breakpoints:{values:{xs:0,sm:600,md:960,lg:1200,xl:1920}},overrides:{MuiCssBaseline:{"@global":{"#root":{minHeight:"100vh",display:"flex",flexDirection:"column","& > *":{flexShrink:0}}}}}}};var ae=Object(ee.a)("isDarkMode"),ne=function(e){var t,a=Object(_.a)("(prefers-color-scheme: dark)",{noSsr:!0}),n=ae(),o=Object(b.a)(n,2),i=o[0],c=o[1],r=(t=(void 0===i?a:i)?"dark":"light",Object($.a)(Object(u.a)(Object(u.a)(Object(u.a)({},te[t]),te.common),{},{overrides:Object(u.a)(Object(u.a)({},te[t]&&te[t].overrides),te.common&&te.common.overrides)})));return r.palette.toggle=function(){return c((function(e){return!e}))},Object(g.jsxs)(K.a,{theme:r,children:[Object(g.jsx)(Z.a,{}),e.children]})};function oe(){var e=Object(V.a)();return{value:"dark"===e.palette.type,toggle:e.palette.toggle}}var ie=Object(h.a)((function(e){return{logo:{height:28,marginRight:e.spacing(2)},drawerList:{width:250},spacer:{flexGrow:1}}}));var ce=function(e){var t=ie(),a=oe(),o=Object(n.useState)(!1),i=Object(b.a)(o,2),c=i[0],r=i[1],s=Object(n.useState)(null),l=Object(b.a)(s,2);return l[0],l[1],e.logoInverted&&a.value?e.logoInverted:e.logo,Object(g.jsxs)(k,{bgColor:e.color,size:"auto",children:[Object(g.jsx)(I.a,{position:"static",color:"transparent",elevation:0,children:Object(g.jsx)(C.a,{disableGutters:!0,children:Object(g.jsxs)(w.a,{children:[Object(g.jsx)(W.a,{to:"/",children:"/"}),Object(g.jsx)("div",{className:t.spacer}),Object(g.jsx)(P.a,{mdUp:!0,implementation:"css",children:Object(g.jsx)(T.a,{onClick:function(){r(!0)},color:"inherit",children:Object(g.jsx)(B.a,{})})}),Object(g.jsxs)(P.a,{smDown:!0,implementation:"css",children:[Object(g.jsx)(E.a,{color:"inherit",component:W.a,to:"/about",children:"iLLANCiER"}),Object(g.jsxs)(T.a,{color:"inherit",onClick:a.toggle,style:{opacity:.6},children:[a.value&&Object(g.jsx)(D.a,{}),!a.value&&Object(g.jsx)(R.a,{})]})]})]})})}),Object(g.jsx)(H.a,{anchor:"right",open:c,onClose:function(){return r(!1)},children:Object(g.jsxs)(G.a,{className:t.drawerList,onClick:function(){return r(!1)},children:[Object(g.jsx)(J.a,{button:!0,component:W.a,to:"/about",children:Object(g.jsx)(U.a,{children:"iLLANCiER"})}),Object(g.jsx)(J.a,{children:Object(g.jsxs)(T.a,{color:"inherit",onClick:a.toggle,style:{opacity:.6},children:[a.value&&Object(g.jsx)(D.a,{}),!a.value&&Object(g.jsx)(R.a,{})]})})]})})]})},re=a(87),se=Object(h.a)((function(e){return{root:{"&:not(:last-child)":{marginBottom:"2rem"}},subtitle:{maxWidth:700,display:"inline-block"}}}));var le=function(e){var t=se(),a=e.subtitle,n=e.title,o=e.size,i=(e.className,Object(d.a)(e,["subtitle","title","size","className"]));return n||a?Object(g.jsxs)(p.a,Object(u.a)(Object(u.a)({component:"header",className:t.root+(e.className?" ".concat(e.className):"")},i),{},{children:[n&&Object(g.jsx)(re.a,{variant:"h".concat(o),gutterBottom:!!e.subtitle,children:n}),a&&Object(g.jsx)(re.a,{variant:"subtitle1",className:t.subtitle,children:a})]})):null};var be=function(e){return Object(g.jsx)(k,{bgColor:e.bgColor,size:e.size,bgImage:e.bgImage,bgImageOpacity:e.bgImageOpacity,children:Object(g.jsx)(C.a,{children:Object(g.jsx)(p.a,{textAlign:"center",children:Object(g.jsx)(le,{title:e.title,subtitle:e.subtitle,size:4})})})})},de=a(248);function je(e){return"undefined"==typeof e?"":parseFloat(e).toFixed(4)}function ue(e){if("undefined"==typeof e)return"";var t=parseFloat(e)/1e6;return"$"+(t<1?t.toFixed(4):t.toFixed(1))+"M"}var pe=function(e){var t=0==e.pool.tokens.length?0:function(e,t,a){var n=t.balance,o=e.balance,i=e.denormWeight/a.totalWeight;return n/(t.denormWeight/a.totalWeight)/(o/i)}(e.pool.tokens[0],e.pool.tokens[1],e.pool),a=0==e.pool.tokens.length?[]:[{title:"Spot Price",stat:je(t)},{title:"Inverse Spot Price",stat:je(1/t)},{title:e.pool.tokens[0].symbol,stat:je(e.pool.tokens[0].balance)},{title:e.pool.tokens[1].symbol,stat:je(e.pool.tokens[1].balance)},{title:"1 BPT in "+e.pool.tokens[0].symbol,stat:je(e.pool.tokens[0].balance/e.pool.totalShares)},{title:"1 BPT in "+e.pool.tokens[1].symbol,stat:je(e.pool.tokens[1].balance/e.pool.totalShares)},{title:"Market Cap",stat:ue(e.pool.liquidity)},{title:"Total Shares",stat:je(e.pool.totalShares)},{title:"Swap Fee",stat:je(100*e.pool.swapFee)+"%"}];return Object(g.jsx)(k,{bgColor:e.bgColor,size:e.size,bgImage:e.bgImage,bgImageOpacity:e.bgImageOpacity,children:Object(g.jsx)(C.a,{children:Object(g.jsx)(de.a,{container:!0,justify:"center",spacing:4,children:a.map((function(e,t){return Object(g.jsx)(de.a,{item:!0,xs:12,sm:3,children:Object(g.jsxs)(p.a,{textAlign:"center",children:[Object(g.jsx)(re.a,{variant:"overline",children:e.title}),Object(g.jsx)(re.a,{variant:"h4",children:e.stat})]})},t)}))})})})},he=a(259),ge=a(249),me=a(250),Oe=a(62),xe=a.n(Oe),fe=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return Object(g.jsx)(de.a,{container:!0,justify:"center",spacing:4,children:Object(g.jsxs)(he.a,{defaultExpanded:!0,children:[Object(g.jsx)(ge.a,{expandIcon:Object(g.jsx)(xe.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:Object(g.jsx)(re.a,{children:"Liquidity Log"})}),Object(g.jsx)(me.a,{children:Object(g.jsx)(G.a,{children:this.props.logs.map((function(e,t){return Object(g.jsx)(J.a,{children:Object(g.jsxs)(U.a,{children:[t+1,": ",e]})},"log-"+t)}))})})]})})}}]),a}(n.Component),ve=a(251),ye=a(252),ke=a(260),Ie=a(253),Ce=Object(h.a)((function(e){return{card:{display:"flex",flexDirection:"column",height:"100%"},avatarWrapper:{display:"flex",justifyContent:"center"},avatar:{width:e.spacing(15),height:e.spacing(15)}}}));var we=function(e){var t=Ce(),a=Object(n.useState)(0),o=Object(b.a)(a,2),i=o[0],c=o[1],r=Object(n.useState)(0),s=Object(b.a)(r,2),l=s[0],d=[c,s[1]],j=[i,l],u=function(e){return 0==e?1:0},h=function(t){var a=function(e,t,a,n){var o=t.balance,i=e.balance,c=e.denormWeight/a.totalWeight,r=t.denormWeight/a.totalWeight,s=a.swapFee,l=o*(1-Math.pow(i/(i+n*(1-s)),c/r));return e.balance+=n,t.balance-=l,l}(e.pool.tokens[t],e.pool.tokens[u(t)],e.pool,j[t]);e.updatePool(e.pool),d[u(t)](a);var n="SWAP from ".concat(j[t]," ").concat(e.pool.tokens[t].symbol," to ").concat(a," ").concat(e.pool.tokens[u(t)].symbol);e.addLog(n)};return Object(g.jsx)(k,{bgColor:e.bgColor,size:e.size,bgImage:e.bgImage,bgImageOpacity:e.bgImageOpacity,children:Object(g.jsxs)(C.a,{children:[Object(g.jsx)(le,{title:e.title,subtitle:e.subtitle,size:4,textAlign:"center"}),Object(g.jsx)(de.a,{container:!0,justify:"center",spacing:4,children:e.pool.tokens.map((function(a,n){return Object(g.jsx)(de.a,{item:!0,xs:12,sm:6,md:4,children:Object(g.jsx)("form",{noValidate:!0,autoComplete:"off",children:Object(g.jsx)(ve.a,{className:t.card,children:Object(g.jsxs)(ye.a,{children:[Object(g.jsx)(p.a,{className:t.avatarWrapper,children:Object(g.jsx)(ke.a,{src:(i=a.symbol,"https://icons.bitbot.tools/api/".concat(i.toLowerCase(),"/64x64")),alt:a.symbol,className:t.avatar})}),Object(g.jsxs)(p.a,{textAlign:"center",pt:3,children:[Object(g.jsx)(re.a,{variant:"body2",component:"p",children:a.symbol}),Object(g.jsx)(re.a,{variant:"body2",color:"textSecondary",component:"p",children:a.addess}),Object(g.jsxs)(p.a,{mt:2,children:[Object(g.jsx)(Ie.a,{id:"outlined-helperText",label:"Swap Amount",value:j[n],helperText:"Balance: "+a.balance,variant:"outlined",onChange:function(e){return function(e,t){return isNaN(parseFloat(e))?null:d[t](parseFloat(e))}(e.target.value,n)}}),Object(g.jsxs)(re.a,{variant:"body1",component:"p",children:["Token weight: ",(o=a.denormWeight/e.pool.totalWeight,"undefined"==typeof o?"":parseFloat(o).toFixed(4)),"%"]}),Object(g.jsx)(E.a,{variant:"contained",size:"large",color:"primary",onClick:function(){return h(n)},children:"Swap"})]})]})]})})})},n);var o,i}))})]})})},Se=a(102),ze=a.n(Se),We=a(124),Ne=a(172);function Fe(e){var t=e.totalWeight;return e.tokens.map((function(e){return"".concat((100*e.denormWeight/t).toFixed(2),"% ").concat(e.symbol)})).join(" ")}function Le(e){return e.map((function(e){return Object(u.a)({name:Fe(e)},e)}))}function Pe(){return(Pe=Object(We.a)(ze.a.mark((function e(t){var a,n,o,i;return ze.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ne.post("https://api.thegraph.com/subgraphs/name/balancer-labs/balancer",{query:"\n            {\n              pools(first: 10, orderBy: liquidity, orderDirection: desc, where: {publicSwap: true, finalized: true, active: true}) {\n                id\n                swapFee\n                totalShares\n                totalWeight\n                liquidity\n                tokensList\n                tokens {\n                  id\n                  symbol\n                  address\n                  balance\n                  denormWeight\n                }\n              }\n            }\n          "});case 3:for(a=e.sent,console.log(a.data.data.pools),n=Le(n=a.data.data.pools),o=0;o<n.length;o++){for(i=0;i<n[o].tokens.length;i++)n[o].tokens[i].balance=parseFloat(n[o].tokens[i].balance),n[o].tokens[i].denormWeight=parseFloat(n[o].tokens[i].denormWeight);n[o].swapFee=parseFloat(n[o].swapFee),n[o].totalWeight=parseFloat(n[o].totalWeight)}return e.abrupt("return",n);case 11:return e.prev=11,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}var Te=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={pools:[]},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;(function(e){return Pe.apply(this,arguments)})().then((function(t){return e.setState({pools:t})}))}},{key:"render",value:function(){var e=this;return Object(g.jsx)(de.a,{container:!0,justify:"center",spacing:4,children:Object(g.jsxs)(he.a,{defaultExpanded:!0,children:[Object(g.jsx)(ge.a,{expandIcon:Object(g.jsx)(xe.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:Object(g.jsx)(re.a,{children:"Top 10 Balancer Pools (CLICK ONE)"})}),Object(g.jsx)(me.a,{children:Object(g.jsx)(G.a,{children:this.state.pools.map((function(t){return Object(g.jsxs)(J.a,{children:[Object(g.jsx)(U.a,{children:(a=t.id,a.slice(0,6)+"..."+a.slice(-4))}),Object(g.jsx)(E.a,{variant:t.id==e.props.activePoolId?"contained":"outlined",size:"large",color:"primary",onClick:function(){return e.props.onChoose(t)},children:t.name})]},t.id);var a}))})})]})})}}]),a}(n.Component),Ae=Object(h.a)((function(e){return{sticky:{marginTop:"auto"},wrapper:{display:"flex",flexWrap:"wrap"},item:Object(j.a)({display:"flex",flex:"none",justifyContent:"center",width:"100%",marginBottom:24},e.breakpoints.up("sm"),{flex:"50%"}),brand:{display:"block",height:32},social:{alignItems:"flex-end"},link:{textDecoration:"none",color:"inherit",lineHeight:1,"&:hover":{opacity:.8},"&:not(:first-of-type)":{marginLeft:20}},left:Object(j.a)({},e.breakpoints.up("sm"),{justifyContent:"flex-start"}),right:Object(j.a)({},e.breakpoints.up("sm"),{justifyContent:"flex-end"}),smallLinks:Object(j.a)({},e.breakpoints.up("sm"),{order:1})}}));var Be=function(e){var t=Ae(),a=oe();return e.logoInverted&&a.value?e.logoInverted:e.logo,Object(g.jsx)(k,{bgColor:e.bgColor,size:e.size,bgImage:e.bgImage,bgImageOpacity:e.bgImageOpacity,className:e.sticky&&t.sticky,children:Object(g.jsx)(C.a,{children:Object(g.jsx)("div",{className:t.wrapper,children:e.copyright&&Object(g.jsx)("div",{className:"".concat(t.item," ").concat(t.left),children:Object(g.jsx)(re.a,{component:"p",children:e.copyright})})})})})},Ee=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={activePoolId:null,pool:{name:"none",tokens:[]},logs:[]},e}return Object(r.a)(a,[{key:"setPool",value:function(e){this.setState({pool:e}),this.setState({activePoolId:e.id})}},{key:"updatePool",value:function(e){this.setState({pool:e})}},{key:"addLog",value:function(e){this.state.logs.push(e),console.log(this.state.logs),this.setState({logs:this.state.logs})}},{key:"render",value:function(){var e=this;return Object(g.jsxs)("div",{children:[Object(g.jsx)(be,{bgColor:"defaulthttps://icons.bitbot.tools/api/weth/64x64",size:"medium",bgImage:"",bgImageOpacity:1,title:"iLLANCiER",subtitle:"Simulate swaps and liquidity on Balancer pools",buttonText:this.state.pool.name,buttonColor:"primary",buttonPath:"/"}),Object(g.jsx)(Te,{activePoolId:this.state.activePoolId,onChoose:function(t){return e.setPool(t)}}),Object(g.jsx)(we,{bgColor:"default",size:"medium",bgImage:"",bgImageOpacity:1,title:"Swap & Add/Remove Liquidity",subtitle:"",pool:this.state.pool,updatePool:function(t){return e.updatePool(t)},items:[{name:"renBTC"},{name:"WETH",description:"Wrapped ETH"}],addLog:function(t){return e.addLog(t)}}),Object(g.jsx)(fe,{logs:this.state.logs}),Object(g.jsx)(pe,{pool:this.state.pool,bgColor:"default",size:"medium",bgImage:"",bgImageOpacity:1})]})}}]),a}(n.Component);var qe=function(e){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(ce,{color:"default",logo:"https://uploads.divjoy.com/logo.svg",logoInverted:"https://uploads.divjoy.com/logo-white.svg"}),Object(g.jsx)(Ee,{}),Object(g.jsx)(Be,{bgColor:"default",size:"medium",bgImage:"",bgImageOpacity:1,description:"Simulating swapping and liquidity in Balancer pools and beyond",copyright:"\xa9 2021 iLLANCiER",logo:"",logoInverted:"",sticky:!0})]})};var De=function(e){return Object(g.jsxs)("div",{style:{padding:"50px",width:"100%",textAlign:"center"},children:["The page ",Object(g.jsx)("code",{children:e.location.pathname})," could not be found"]})},Me=a(125),Re=a(128),He=Object(Me.a)({debug:!1,plugins:[Object(Re.a)({trackingId:"UA-144828740-3"})]});"undefined"!==typeof window&&He.page(),N.listen((function(){He.page()}));var Ge=function(e){return Object(g.jsx)(ne,{children:Object(g.jsx)(F,{children:Object(g.jsxs)(S.c,{children:[Object(g.jsx)(S.a,{exact:!0,path:"/",component:qe}),Object(g.jsx)(S.a,{component:De})]})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(g.jsx)(Ge,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[192,1,2]]]);
//# sourceMappingURL=main.bd3dbfb7.chunk.js.map