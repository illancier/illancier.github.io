(this.webpackJsonpillancer=this.webpackJsonpillancer||[]).push([[0],{192:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(10),i=a.n(o),c=a(51),r=a(52),l=a(55),s=a(54),b=a(19),d=a(56),u=a(34),j=a(13),p=a(254),g=a(236),h=a(2),m=Object(g.a)((function(e){return{root:{content:"",backgroundPosition:"center center",backgroundSize:"cover",top:0,left:0,bottom:0,right:0,position:"absolute",zIndex:0}}}));var O=function(e){var t=m(),a=e.image,n=e.opacity,o=Object(d.a)(e,["image","opacity"]);return Object(h.jsx)("div",Object(j.a)({className:t.root,style:{backgroundImage:"url(".concat(a,")"),opacity:n}},o))},f=a(96),x=a(97),v=a.n(x),y=Object(g.a)((function(e){return Object(j.a)(Object(j.a)({root:{position:"relative","& > .MuiContainer-root":{position:"relative"}}},[["default",e.palette.background.default],["light",Object(f.emphasize)(e.palette.background.default,.03)],["primary",e.palette.primary.main],["secondary",e.palette.secondary.main]].reduce((function(t,a){var n=Object(b.a)(a,2),o=n[0],i=n[1];return t["color".concat(v()(o))]=Object(u.a)({backgroundColor:i,color:e.palette.getContrastText(i)},"& + &",{borderTop:"1px solid ".concat(Object(f.emphasize)(i,.09))}),t}),{})),{},{colorInherit:{color:"inherit"},colorTransparent:{backgroundColor:"transparent",color:"inherit"}})}));var k=function(e){var t=y(),a=e.bgColor,n=void 0===a?"default":a,o=e.bgImage,i=e.bgImageOpacity,c=e.size,r=void 0===c?"normal":c,l=e.className,s=(e.children,Object(d.a)(e,["bgColor","bgImage","bgImageOpacity","size","className","children"])),b={normal:{xs:6},medium:{xs:6,sm:10},large:{xs:6,sm:20},auto:0}[r];return Object(h.jsxs)(p.a,Object(j.a)(Object(j.a)({component:"section",py:b,className:t.root+" ".concat(t["color".concat(v()(n))])+(l?" ".concat(l):"")},s),{},{children:[o&&Object(h.jsx)(O,{image:o,opacity:i}),e.children]}))},I=a(241),C=a(242),w=a(243),S=a(12),W=(a(122),a(21)),z=a(68),L=Object(W.a)();function F(e){var t=e.children;return Object(h.jsxs)(S.b,{history:L,children:[Object(h.jsx)(P,{}),t]})}function P(){var e=Object(S.g)();return Object(n.useEffect)((function(){window.scrollTo(0,0)}),[e.pathname]),null}var N=a(257),T=a(194),B=a(123),D=a.n(B),A=a(244),q=a(100),M=a.n(q),E=a(101),H=a.n(E),R=a(258),V=a(245),G=a(246),J=a(247),K=a(129),U=a(239),$=a(14),X=a(85),Q=a(86),Y=a(84),Z=a(240),_=a(238),ee=a(256),te={light:{palette:{type:"light",primary:{main:X.a[500]},secondary:{main:Q.a[500]},background:{default:"#fff",paper:"#fff"}}},dark:{palette:{type:"dark",primary:{main:X.a[500]},secondary:{main:Q.a[500]},background:{default:Y.a[900],paper:Y.a[800]}}},common:{typography:{fontSize:14,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif'},breakpoints:{values:{xs:0,sm:600,md:960,lg:1200,xl:1920}},overrides:{MuiCssBaseline:{"@global":{"#root":{minHeight:"100vh",display:"flex",flexDirection:"column","& > *":{flexShrink:0}}}}}}};var ae=Object(ee.a)("isDarkMode"),ne=function(e){var t,a=Object(_.a)("(prefers-color-scheme: dark)",{noSsr:!0}),n=ae(),o=Object(b.a)(n,2),i=o[0],c=o[1],r=(t=(void 0===i?a:i)?"dark":"light",Object(K.a)(Object(j.a)(Object(j.a)(Object(j.a)({},te[t]),te.common),{},{overrides:Object(j.a)(Object(j.a)({},te[t]&&te[t].overrides),te.common&&te.common.overrides)})));return r.palette.toggle=function(){return c((function(e){return!e}))},Object(h.jsxs)(U.a,{theme:r,children:[Object(h.jsx)(Z.a,{}),e.children]})};function oe(){var e=Object($.a)();return{value:"dark"===e.palette.type,toggle:e.palette.toggle}}var ie=Object(g.a)((function(e){return{logo:{height:28,marginRight:e.spacing(2)},drawerList:{width:250},spacer:{flexGrow:1}}}));var ce=function(e){var t=ie(),a=oe(),o=Object(n.useState)(!1),i=Object(b.a)(o,2),c=i[0],r=i[1],l=Object(n.useState)(null),s=Object(b.a)(l,2);return s[0],s[1],e.logoInverted&&a.value?e.logoInverted:e.logo,Object(h.jsxs)(k,{bgColor:e.color,size:"auto",children:[Object(h.jsx)(I.a,{position:"static",color:"transparent",elevation:0,children:Object(h.jsx)(C.a,{disableGutters:!0,children:Object(h.jsxs)(w.a,{children:[Object(h.jsx)(z.a,{to:"/",children:"/"}),Object(h.jsx)("div",{className:t.spacer}),Object(h.jsx)(N.a,{mdUp:!0,implementation:"css",children:Object(h.jsx)(T.a,{onClick:function(){r(!0)},color:"inherit",children:Object(h.jsx)(D.a,{})})}),Object(h.jsxs)(N.a,{smDown:!0,implementation:"css",children:[Object(h.jsx)(A.a,{color:"inherit",component:z.a,to:"/about",children:"{ impSlap }"}),Object(h.jsxs)(T.a,{color:"inherit",onClick:a.toggle,style:{opacity:.6},children:[a.value&&Object(h.jsx)(M.a,{}),!a.value&&Object(h.jsx)(H.a,{})]})]})]})})}),Object(h.jsx)(R.a,{anchor:"right",open:c,onClose:function(){return r(!1)},children:Object(h.jsxs)(V.a,{className:t.drawerList,onClick:function(){return r(!1)},children:[Object(h.jsx)(G.a,{button:!0,component:z.a,to:"/about",children:Object(h.jsx)(J.a,{children:"impSlap"})}),Object(h.jsx)(G.a,{children:Object(h.jsxs)(T.a,{color:"inherit",onClick:a.toggle,style:{opacity:.6},children:[a.value&&Object(h.jsx)(M.a,{}),!a.value&&Object(h.jsx)(H.a,{})]})})]})})]})},re=a(87),le=Object(g.a)((function(e){return{root:{"&:not(:last-child)":{marginBottom:"2rem"}},subtitle:{maxWidth:700,display:"inline-block"}}}));var se=function(e){var t=le(),a=e.subtitle,n=e.title,o=e.size,i=(e.className,Object(d.a)(e,["subtitle","title","size","className"]));return n||a?Object(h.jsxs)(p.a,Object(j.a)(Object(j.a)({component:"header",className:t.root+(e.className?" ".concat(e.className):"")},i),{},{children:[n&&Object(h.jsx)(re.a,{variant:"h".concat(o),gutterBottom:!!e.subtitle,children:n}),a&&Object(h.jsx)(re.a,{variant:"subtitle1",className:t.subtitle,children:a})]})):null};var be=function(e){return Object(h.jsx)(k,{bgColor:e.bgColor,size:e.size,bgImage:e.bgImage,bgImageOpacity:e.bgImageOpacity,children:Object(h.jsx)(C.a,{children:Object(h.jsx)(p.a,{textAlign:"center",children:Object(h.jsx)(se,{title:e.title,subtitle:e.subtitle,size:4})})})})},de=a(248);function ue(e){return"undefined"==typeof e?"":Math.abs(parseFloat(e))<1?parseFloat(e).toFixed(5):parseFloat(e).toLocaleString()}function je(e){return(100*parseFloat(e)).toLocaleString()+"%"}function pe(e){if("undefined"==typeof e)return"";var t=parseFloat(e)/1e6;return"$"+(t<1?t.toFixed(2):t.toFixed(1))+"M"}function ge(e,t){return"".concat((e-t>0?"+":"")+ue(e-t)," (").concat(je((e-t)/t),")")}function he(e,t){return"".concat(e," (").concat(t,")")}var me=function(e){var t=e.pool.tokens[0],a=e.pool.tokens[1],n=parseFloat(e.pool.totalShares),o=function(e,t,a){return e/n+a*t/n},i=0,c=0,r=0,l=0,s=0,b=0;e.pool.tokens.length&&(i=function(e,t,a){var n=t.balance,o=e.balance,i=e.denormWeight/a.totalWeight;return n/(t.denormWeight/a.totalWeight)/(o/i)}(t,a,e.pool),c=function(e,t,a){var n=t.balanceOriginal,o=e.balanceOriginal,i=e.denormWeight/a.totalWeight;return n/(t.denormWeight/a.totalWeight)/(o/i)}(t,a,e.pool),r=o(t.balanceOriginal,a.balanceOriginal,1/i),console.log(t.balanceOriginal,a.balanceOriginal,1/i,n),l=o(a.balanceOriginal,t.balanceOriginal,i),s=o(t.balance,a.balance,1/i),b=o(a.balance,t.balance,i));var d=0==e.pool.tokens.length?[]:[{title:"Original Market Cap",stat:pe(e.pool.liquidity)},{title:"Total BPT Shares",stat:ue(n)},{title:"Rate (Inverse)",stat:he(t.symbol+"/"+a.symbol,a.symbol+"/"+t.symbol)},{title:"Original Spot Price (Inverse)",stat:he(ue(c),ue(1/c))},{title:"Original 1 BPT had ".concat(t.symbol," + ").concat(a.symbol),stat:ue(t.balanceOriginal/n)+" + "+ue(a.balanceOriginal/n)},{title:"Current 1 BPT has ".concat(t.symbol," + ").concat(a.symbol),stat:ue(t.balance/n)+" + "+ue(a.balance/n)},{title:"Total Pool "+he(t.symbol,a.symbol),stat:he(ue(t.balance),ue(a.balance))},{title:"Current Spot Price (Inverse)",stat:he(ue(i),ue(1/i))},{title:"HODL Value of Original BPT in current spot "+t.symbol+" (".concat(a.symbol,")"),stat:he(ue(r),ue(l))},{title:"Value of 1 BPT in "+t.symbol+" (".concat(a.symbol,")"),stat:he(ue(s),ue(b))},{title:"Divergence Loss vs HODL in "+t.symbol+" (".concat(a.symbol,")"),stat:he(ue(s-r),ue(b-l))},{title:"% Spot Price Change in "+t.symbol+" (".concat(a.symbol,")"),stat:he(je(i/c-1),je(1/i/(1/c)-1))},{title:"Net Change in 1 BPT in "+t.symbol,stat:ge(t.balance/n,t.balanceOriginal/n)},{title:"Net Change in 1 BPT in "+a.symbol,stat:ge(a.balance/n,a.balanceOriginal/n)},{title:"% Divergence Loss vs HODL in "+t.symbol+" (".concat(a.symbol,")"),stat:he(je((s-r)/r),je((b-l)/l))},{title:"Swap Fee",stat:je(e.pool.swapFee)}];return Object(h.jsx)(k,{bgColor:e.bgColor,size:e.size,bgImage:e.bgImage,bgImageOpacity:e.bgImageOpacity,children:Object(h.jsx)(C.a,{children:Object(h.jsx)(de.a,{container:!0,justify:"center",spacing:4,children:d.map((function(e,t){return Object(h.jsx)(de.a,{item:!0,xs:12,sm:3,children:Object(h.jsxs)(p.a,{textAlign:"center",children:[Object(h.jsx)(re.a,{variant:"overline",children:e.title}),Object(h.jsx)(re.a,{variant:"h4",children:e.stat})]})},t)}))})})})},Oe=a(259),fe=a(249),xe=a(250),ve=a(62),ye=a.n(ve),ke=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return Object(h.jsx)(de.a,{container:!0,justify:"center",spacing:4,children:Object(h.jsxs)(Oe.a,{defaultExpanded:!0,children:[Object(h.jsx)(fe.a,{expandIcon:Object(h.jsx)(ye.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:Object(h.jsx)(re.a,{children:"Liquidity Log"})}),Object(h.jsx)(xe.a,{children:Object(h.jsx)(V.a,{children:this.props.logs.map((function(e,t){return Object(h.jsx)(G.a,{children:Object(h.jsxs)(J.a,{children:[t+1,": ",e]})},"log-"+t)}))})})]})})}}]),a}(n.Component),Ie=a(251),Ce=a(252),we=a(260),Se=a(253),We=Object(g.a)((function(e){return{card:{display:"flex",flexDirection:"column",height:"100%"},avatarWrapper:{display:"flex",justifyContent:"center"},avatar:{width:e.spacing(15),height:e.spacing(15)}}}));var ze=function(e){var t=We(),a=Object(n.useState)(0),o=Object(b.a)(a,2),i=o[0],c=o[1],r=Object(n.useState)(0),l=Object(b.a)(r,2),s=l[0],d=[c,l[1]],u=[i,s],j=function(e){return 0==e?1:0},g=function(t){var a=function(e,t,a,n){var o=t.balance,i=e.balance,c=e.denormWeight/a.totalWeight,r=t.denormWeight/a.totalWeight,l=a.swapFee,s=o*(1-Math.pow(i/(i+n*(1-l)),c/r));return e.balance+=n,t.balance-=s,s}(e.pool.tokens[t],e.pool.tokens[j(t)],e.pool,u[t]);e.updatePool(e.pool),d[j(t)](a);var n="SWAP from ".concat(u[t]," ").concat(e.pool.tokens[t].symbol," to ").concat(a," ").concat(e.pool.tokens[j(t)].symbol);e.addLog(n)};return Object(h.jsx)(k,{bgColor:e.bgColor,size:e.size,bgImage:e.bgImage,bgImageOpacity:e.bgImageOpacity,children:Object(h.jsxs)(C.a,{children:[Object(h.jsx)(se,{title:e.title,subtitle:e.subtitle,size:4,textAlign:"center"}),Object(h.jsx)(de.a,{container:!0,justify:"center",spacing:4,children:e.pool.tokens.map((function(a,n){return Object(h.jsx)(de.a,{item:!0,xs:12,sm:6,md:4,children:Object(h.jsx)("form",{noValidate:!0,autoComplete:"off",children:Object(h.jsx)(Ie.a,{className:t.card,children:Object(h.jsxs)(Ce.a,{children:[Object(h.jsx)(p.a,{className:t.avatarWrapper,children:Object(h.jsx)(we.a,{src:(i=a.symbol,"https://icons.bitbot.tools/api/".concat(i.toLowerCase(),"/64x64")),alt:a.symbol,className:t.avatar})}),Object(h.jsxs)(p.a,{textAlign:"center",pt:3,children:[Object(h.jsx)(re.a,{variant:"body2",component:"p",children:a.symbol}),Object(h.jsx)(re.a,{variant:"body2",color:"textSecondary",component:"p",children:a.addess}),Object(h.jsxs)(p.a,{mt:2,children:[Object(h.jsx)(Se.a,{id:"outlined-helperText",label:"Amount (<0 Liquidity OK)",value:u[n],helperText:"Balance: "+a.balance,variant:"outlined",onChange:function(e){return function(e,t){return isNaN(parseFloat(e))?null:d[t](parseFloat(e))}(e.target.value,n)}}),Object(h.jsxs)(re.a,{variant:"body1",component:"p",children:["Token weight: ",(o=100*a.denormWeight/e.pool.totalWeight,"undefined"==typeof o?"":parseFloat(o).toFixed(4)),"%"]}),Object(h.jsx)(A.a,{variant:"contained",size:"large",color:"primary",onClick:function(){return g(n)},children:"Swap In"}),Object(h.jsx)(A.a,{variant:"contained",size:"large",color:"primary",onClick:function(){return function(t){e.pool.tokens[t].balance+=u[t];var a="".concat(u[t]>0?"ADD":"REMOVE"," liquidity from ").concat(e.pool.tokens[t].symbol,": ").concat(u[t]," ");e.addLog(a)}(n)},children:"Add Liquidity"})]})]})]})})})},n);var o,i}))})]})})},Le=a(102),Fe=a.n(Le),Pe=a(124),Ne=a(172);function Te(e){var t=e.totalWeight;return e.tokens.map((function(e){return"".concat((100*e.denormWeight/t).toFixed(2),"% ").concat(e.symbol)})).join(" ")}function Be(e){return e.map((function(e){return Object(j.a)({name:Te(e)},e)}))}function De(){return(De=Object(Pe.a)(Fe.a.mark((function e(t){var a,n,o,i;return Fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ne.post("https://api.thegraph.com/subgraphs/name/balancer-labs/balancer",{query:"\n            {\n              pools(first: 10, orderBy: liquidity, orderDirection: desc, where: {publicSwap: true, finalized: true, active: true}) {\n                id\n                swapFee\n                totalShares\n                totalWeight\n                liquidity\n                tokensList\n                tokens {\n                  id\n                  symbol\n                  address\n                  balance\n                  denormWeight\n                }\n              }\n            }\n          "});case 3:for(a=e.sent,console.log(a.data.data.pools),n=Be(n=a.data.data.pools),o=0;o<n.length;o++){for(i=0;i<n[o].tokens.length;i++)n[o].tokens[i].balance=parseFloat(n[o].tokens[i].balance),n[o].tokens[i].balanceOriginal=n[o].tokens[i].balance,n[o].tokens[i].denormWeight=parseFloat(n[o].tokens[i].denormWeight);n[o].swapFee=parseFloat(n[o].swapFee),n[o].totalWeight=parseFloat(n[o].totalWeight)}return e.abrupt("return",n);case 11:return e.prev=11,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}var Ae=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={pools:[]},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;(function(e){return De.apply(this,arguments)})().then((function(t){return e.setState({pools:t})}))}},{key:"render",value:function(){var e=this;return Object(h.jsx)(de.a,{container:!0,justify:"center",spacing:4,children:Object(h.jsxs)(Oe.a,{defaultExpanded:!0,children:[Object(h.jsx)(fe.a,{expandIcon:Object(h.jsx)(ye.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:Object(h.jsx)(re.a,{children:"Top 10 Balancer Pools (CLICK ONE)"})}),Object(h.jsx)(xe.a,{children:Object(h.jsx)(V.a,{children:this.state.pools.map((function(t){return Object(h.jsxs)(G.a,{children:[Object(h.jsx)(J.a,{children:(a=t.id,a.slice(0,6)+"..."+a.slice(-4))}),Object(h.jsx)(A.a,{variant:t.id==e.props.activePoolId?"contained":"outlined",size:"large",color:"primary",onClick:function(){return e.props.onChoose(t)},children:t.name})]},t.id);var a}))})})]})})}}]),a}(n.Component),qe=Object(g.a)((function(e){return{sticky:{marginTop:"auto"},wrapper:{display:"flex",flexWrap:"wrap"},item:Object(u.a)({display:"flex",flex:"none",justifyContent:"center",width:"100%",marginBottom:24},e.breakpoints.up("sm"),{flex:"50%"}),brand:{display:"block",height:32},social:{alignItems:"flex-end"},link:{textDecoration:"none",color:"inherit",lineHeight:1,"&:hover":{opacity:.8},"&:not(:first-of-type)":{marginLeft:20}},left:Object(u.a)({},e.breakpoints.up("sm"),{justifyContent:"flex-start"}),right:Object(u.a)({},e.breakpoints.up("sm"),{justifyContent:"flex-end"}),smallLinks:Object(u.a)({},e.breakpoints.up("sm"),{order:1})}}));var Me=function(e){var t=qe(),a=oe();return e.logoInverted&&a.value?e.logoInverted:e.logo,Object(h.jsx)(k,{bgColor:e.bgColor,size:e.size,bgImage:e.bgImage,bgImageOpacity:e.bgImageOpacity,className:e.sticky&&t.sticky,children:Object(h.jsx)(C.a,{children:Object(h.jsx)("div",{className:t.wrapper,children:e.copyright&&Object(h.jsx)("div",{className:"".concat(t.item," ").concat(t.left),children:Object(h.jsx)(re.a,{component:"p",children:e.copyright})})})})})},Ee=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={activePoolId:null,pool:{name:"none",tokens:[]},logs:[]},e}return Object(r.a)(a,[{key:"setPool",value:function(e){this.setState({pool:e}),this.setState({activePoolId:e.id})}},{key:"updatePool",value:function(e){this.setState({pool:e})}},{key:"addLog",value:function(e){this.state.logs.push(e),console.log(this.state.logs),this.setState({logs:this.state.logs})}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{children:[Object(h.jsx)(be,{bgColor:"default",size:"medium",bgImage:"",bgImageOpacity:1,title:"{ impSlap }",subtitle:"Learn about Impermanent Loss / Divergence Loss. Simulate swaps and liquidity on Balancer pools and other AMM DEXes.",buttonText:this.state.pool.name,buttonColor:"primary",buttonPath:"/"}),Object(h.jsx)(Ae,{activePoolId:this.state.activePoolId,onChoose:function(t){return e.setPool(t)}}),Object(h.jsx)(ze,{bgColor:"default",size:"medium",bgImage:"",bgImageOpacity:1,title:"Swap & Add/Remove Liquidity",subtitle:"",pool:this.state.pool,updatePool:function(t){return e.updatePool(t)},items:[{name:"renBTC"},{name:"WETH",description:"Wrapped ETH"}],addLog:function(t){return e.addLog(t)}}),Object(h.jsx)(ke,{logs:this.state.logs}),Object(h.jsx)(me,{pool:this.state.pool,bgColor:"default",size:"medium",bgImage:"",bgImageOpacity:1})]})}}]),a}(n.Component);var He=function(e){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(ce,{color:"default",logo:"https://uploads.divjoy.com/logo.svg",logoInverted:"https://uploads.divjoy.com/logo-white.svg"}),Object(h.jsx)(Ee,{}),Object(h.jsx)(Me,{bgColor:"default",size:"medium",bgImage:"",bgImageOpacity:1,description:"Simulating swapping and liquidity in Balancer pools and beyond",copyright:"\xa9 2021 impSlap",logo:"",logoInverted:"",sticky:!0})]})};var Re=function(e){return Object(h.jsxs)("div",{style:{padding:"50px",width:"100%",textAlign:"center"},children:["The page ",Object(h.jsx)("code",{children:e.location.pathname})," could not be found"]})},Ve=a(125),Ge=a(128),Je=Object(Ve.a)({debug:!1,plugins:[Object(Ge.a)({trackingId:"UA-144828740-3"})]});"undefined"!==typeof window&&Je.page(),L.listen((function(){Je.page()}));var Ke=function(e){return Object(h.jsx)(ne,{children:Object(h.jsx)(F,{children:Object(h.jsxs)(S.c,{children:[Object(h.jsx)(S.a,{exact:!0,path:"/",component:He}),Object(h.jsx)(S.a,{component:Re})]})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(h.jsx)(Ke,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[192,1,2]]]);
//# sourceMappingURL=main.3b2e80b3.chunk.js.map